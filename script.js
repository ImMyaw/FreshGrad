// Complete translations object with all required keys
const translations = {
    ar: {
        // Navigation
        logo: "مساري | My Career",
        home: "الرئيسية",
        about: "حولنا",
        certifications: "الشهادات",
        contact: "اتصل بنا",
        
        // Hero Section
        heroTitle: "اكتشف أفضل الشهادات المهنية للمبتدئين والخريجين الجدد",
        heroSubtitle: "دليلك الشامل للحصول على الشهادات المهنية المناسبة لبداية حياتك المهنية في مجال تقنية المعلومات. شهادات معتمدة عالمياً، مناسبة للمبتدئين، وتؤهلك لسوق العمل.",
        startJourney: "ابدأ رحلتك المهنية",
        
        // Stats
        professionalCertifications: "شهادة مهنية",
        careerTracks: "مسارات مهنية",
        successfulProfessionals: "متخصص نجح",
        
        // About Section
        whyUs: "لماذا نحن؟",
        aboutDescription: "نقدم لك دليلاً شاملاً ومُحدّثاً لأفضل الشهادات المهنية المناسبة للمبتدئين والخريجين الجدد",
        
        // Features
        contentQuality: "جودة المحتوى",
        contentQualityDesc: "محتوى مُحدّث باستمرار ومراجع من خبراء في المجال لضمان الدقة والجودة.",
        supportiveCommunity: "مجتمع داعم",
        supportiveCommunityDesc: "انضم إلى مجتمع من المتخصصين والخبراء للحصول على الدعم والمشورة.",
        clearCareerPath: "مسار مهني واضح",
        clearCareerPathDesc: "خريطة طريق واضحة لتطوير مهاراتك والتقدم في حياتك المهنية.",
        
        // Common
        viewDetails: "عرض التفاصيل",
        downloadCV: "تحميل السيرة الذاتية",
        downloadCVButton: "تحميل السيرة الذاتية",
        downloadCVDescription: "تحميل السيرة الذاتية للمدرب عبدالرحمن شحار للاطلاع على خبراته ومؤهلاته في مجال تقنية المعلومات والتدريب المهني.",
        contactUs: "تواصل معنا",
        
        // Footer
        technicalTracks: "المسارات التقنية",
        advancedSpecializations: "التخصصات المتقدمة",
        supportAndHelp: "الدعم والمساعدة",
        allRightsReserved: "جميع الحقوق محفوظة",
        
        // Certification Tracks
        itInfrastructure: "البنية التحتية لتقنية المعلومات",
        cloudComputing: "الحوسبة السحابية",
        cybersecurity: "الأمن السيبراني وإدارة المخاطر",
        itSupport: "الدعم الفني",
        engineering: "الهندسة التقنية",
        dataAnalytics: "تحليل البيانات والبرمجة",
        projectManagement: "إدارة المشاريع والمهارات الإدارية",
        otherFields: "مجالات أخرى مناسبة للخريجين الجدد",
        
        // Track descriptions
        itInfrastructureDesc: "تعلم أساسيات إدارة الشبكات والخوادم والأجهزة، وابدأ مسيرتك في مجال البنية التحتية لتقنية المعلومات.",
        cloudComputingDesc: "اكتشف عالم الحوسبة السحابية مع الشهادات الأساسية من أمازون وميكروسوفت وجوجل.",
        cybersecurityDesc: "ادخل مجال الأمن السيبراني وتعلم حماية الأنظمة والبيانات من التهديدات الإلكترونية.",
        itSupportDesc: "ابدأ مسيرتك في مجال الدعم الفني وحل المشاكل التقنية للمستخدمين.",
        engineeringDesc: "تعلم أساسيات الهندسة التقنية والبرمجيات الهندسية المتخصصة.",
        dataAnalyticsDesc: "ادخل عالم تحليل البيانات والبرمجة وتعلم استخراج الرؤى من البيانات.",
        projectManagementDesc: "تعلم إدارة المشاريع والمهارات الإدارية اللازمة لقيادة الفرق.",
        otherFieldsDesc: "اكتشف مجالات أخرى مناسبة للخريجين الجدد مثل التسويق الرقمي وتحليل الأعمال.",
        
        // Filter
        allCategories: "جميع المجالات",
        searchPlaceholder: "ابحث عن شهادة...",
        filterBy: "تصفية حسب",
        
        // Difficulty levels
        beginner: "مبتدئ",
        intermediate: "متوسط",
        advanced: "متقدم",
        
        // Suitable for
        suitableFor: "مناسب لـ",
        freshGraduates: "الخريجين الجدد",
        careerChangers: "الراغبين في تغيير المسار",
        beginners: "المبتدئين في المجال",
        
        // Certification details
        certificationName: "اسم الشهادة",
        level: "المستوى",
        provider: "المقدم",
        
        // Additional keys
        certificationTracks: "المسارات المهنية للمبتدئين والخريجين الجدد",
        tracksDescription: "اختر المسار المناسب لك وابدأ رحلتك المهنية مع الشهادات المعتمدة عالمياً",
        aboutTitle: "نبذة عن المدرب",
        aboutDescription2: "مرحباً، أنا عبدالرحمن شحار، مدرب معتمد في مجال تقنية المعلومات مع خبرة واسعة في السوق السعودي. أساعد المحترفين والخريجين الجدد على اختيار أفضل الشهادات المهنية التي تناسب احتياجات السوق المحلي.",
        phone: "الهاتف",
        email: "البريد الإلكتروني",
        contactTitle: "تواصل معنا",
        nameLabel: "الاسم",
        emailLabel: "البريد الإلكتروني",
        messageLabel: "الرسالة",
        sendMessage: "إرسال الرسالة",
        footerDescription: "دليلك الشامل للشهادات المهنية في تقنية المعلومات",
        quickLinks: "روابط سريعة",
        contactInfo: "معلومات التواصل",
        rightsReserved: "كل الحقوق محفوظة"
    },
    en: {
        // Navigation
        logo: "My Career | مساري",
        home: "Home",
        about: "About",
        certifications: "Certifications",
        contact: "Contact",
        
        // Hero Section
        heroTitle: "Discover the Best Professional Certifications for Beginners and Fresh Graduates",
        heroSubtitle: "Your comprehensive guide to obtaining the right professional certifications to start your career in information technology. Globally recognized certifications, suitable for beginners, and prepare you for the job market.",
        startJourney: "Start Your Career Journey",
        
        // Stats
        professionalCertifications: "Professional Certifications",
        careerTracks: "Career Tracks",
        successfulProfessionals: "Successful Professionals",
        
        // About Section
        whyUs: "Why Choose Us?",
        aboutDescription: "We provide you with a comprehensive and updated guide to the best professional certifications suitable for beginners and fresh graduates",
        
        // Features
        contentQuality: "Quality Content",
        contentQualityDesc: "Continuously updated content reviewed by industry experts to ensure accuracy and quality.",
        supportiveCommunity: "Supportive Community",
        supportiveCommunityDesc: "Join a community of specialists and experts to get support and advice.",
        clearCareerPath: "Clear Career Path",
        clearCareerPathDesc: "A clear roadmap to develop your skills and advance in your professional career.",
        
        // Common
        viewDetails: "View Details",
        downloadCV: "Download CV",
        downloadCVButton: "Download CV",
        downloadCVDescription: "Download the CV of trainer Abdulrahman Shahar to learn about his experience and qualifications in information technology and professional training.",
        contactUs: "Contact Us",
        
        // Footer
        technicalTracks: "Technical Tracks",
        advancedSpecializations: "Advanced Specializations",
        supportAndHelp: "Support & Help",
        allRightsReserved: "All Rights Reserved",
        
        // Certification Tracks
        itInfrastructure: "IT Infrastructure",
        cloudComputing: "Cloud Computing",
        cybersecurity: "Cybersecurity & GRC",
        itSupport: "IT Support",
        engineering: "Engineering Fields",
        dataAnalytics: "Data Analytics & Programming",
        projectManagement: "Project Management & Administrative Skills",
        otherFields: "Other Fields Suitable for Fresh Graduates",
        
        // Track descriptions
        itInfrastructureDesc: "Learn the fundamentals of managing networks, servers, and hardware, and start your career in IT infrastructure.",
        cloudComputingDesc: "Discover the world of cloud computing with fundamental certifications from Amazon, Microsoft, and Google.",
        cybersecurityDesc: "Enter the field of cybersecurity and learn to protect systems and data from cyber threats.",
        itSupportDesc: "Start your career in technical support and solving technical problems for users.",
        engineeringDesc: "Learn the fundamentals of technical engineering and specialized engineering software.",
        dataAnalyticsDesc: "Enter the world of data analysis and programming and learn to extract insights from data.",
        projectManagementDesc: "Learn project management and administrative skills necessary to lead teams.",
        otherFieldsDesc: "Discover other fields suitable for fresh graduates such as digital marketing and business analysis.",
        
        // Filter
        allCategories: "All Categories",
        searchPlaceholder: "Search for certification...",
        filterBy: "Filter By",
        
        // Difficulty levels
        beginner: "Beginner",
        intermediate: "Intermediate",
        advanced: "Advanced",
        
        // Suitable for
        suitableFor: "Suitable for",
        freshGraduates: "Fresh Graduates",
        careerChangers: "Career Changers",
        beginners: "Beginners in the Field",
        
        // Certification details
        certificationName: "Certification Name",
        level: "Level",
        provider: "Provider",
        
        // Additional keys
        certificationTracks: "Professional Certification Tracks for Beginners and Fresh Graduates",
        tracksDescription: "Choose the right path for you and start your professional journey with globally recognized certifications",
        aboutTitle: "About the Trainer",
        aboutDescription2: "Hello, I'm Abdulrahman Shahar, a certified trainer in information technology with extensive experience in the Saudi market. I help professionals and fresh graduates choose the best professional certifications that suit the local market needs.",
        phone: "Phone",
        email: "Email",
        contactTitle: "Contact Us",
        nameLabel: "Name",
        emailLabel: "Email",
        messageLabel: "Message",
        sendMessage: "Send Message",
        footerDescription: "Your complete guide to IT professional certifications",
        quickLinks: "Quick Links",
        contactInfo: "Contact Information",
        rightsReserved: "All Rights Reserved"
    }
};

// Certification tracks data
const certificationTracks = {
    itInfrastructure: {
        id: 'infrastructure',
        titleKey: 'itInfrastructure',
        descriptionKey: 'itInfrastructureDesc',
        icon: '🖥️',
        color: 'bg-blue-500',
        certifications: [
            {
                id: 'ccna',
                nameAr: 'CCNA – Cisco Certified Network Associate',
                nameEn: 'CCNA – Cisco Certified Network Associate',
                description: 'شهادة أساسية في الشبكات تغطي التوجيه والتبديل وأساسيات البروتوكولات',
                provider: 'Cisco',
                level: 'intermediate'
            },
            {
                id: 'network-plus',
                nameAr: 'CompTIA Network+',
                nameEn: 'CompTIA Network+',
                description: 'شهادة محايدة في أساسيات الشبكات تعطي فهماً شاملاً لتقنيات الشبكات المختلفة',
                provider: 'CompTIA',
                level: 'beginner'
            },
            {
                id: 'cisco-cct',
                nameAr: 'Cisco CCT / CCST',
                nameEn: 'Cisco CCT / CCST',
                description: 'شهادات المستوى المبتدئ من سيسكو للدعم الفني والشبكات',
                provider: 'Cisco',
                level: 'beginner'
            },
            {
                id: 'windows-server',
                nameAr: 'Microsoft Windows Server Hybrid Admin Associate',
                nameEn: 'Microsoft Windows Server Hybrid Admin Associate',
                description: 'إدارة بيئات Windows Server في البيئات المختلطة',
                provider: 'Microsoft',
                level: 'intermediate'
            },
            {
                id: 'fortinet-nse4',
                nameAr: 'Fortinet NSE 4',
                nameEn: 'Fortinet NSE 4',
                description: 'تخصص في حلول الأمان وجدران الحماية من فورتينت',
                provider: 'Fortinet',
                level: 'intermediate'
            }
        ]
    },
    cloudComputing: {
        id: 'cloud',
        titleKey: 'cloudComputing',
        descriptionKey: 'cloudComputingDesc',
        icon: '☁️',
        color: 'bg-cyan-500',
        certifications: [
            {
                id: 'aws-saa',
                nameAr: 'AWS Certified Solutions Architect – Associate',
                nameEn: 'AWS Certified Solutions Architect – Associate',
                description: 'تصميم وبناء أنظمة موزعة على منصة AWS',
                provider: 'AWS',
                level: 'intermediate'
            },
            {
                id: 'aws-cp',
                nameAr: 'AWS Cloud Practitioner',
                nameEn: 'AWS Cloud Practitioner',
                description: 'المدخل الأساسي لمنصة AWS يغطي المفاهيم الأساسية للحوسبة السحابية',
                provider: 'AWS',
                level: 'beginner'
            },
            {
                id: 'azure-admin',
                nameAr: 'Azure Administrator Associate (AZ-104)',
                nameEn: 'Azure Administrator Associate (AZ-104)',
                description: 'إدارة الموارد السحابية على منصة Microsoft Azure',
                provider: 'Microsoft',
                level: 'intermediate'
            },
            {
                id: 'azure-fundamentals',
                nameAr: 'Azure Fundamentals (AZ-900)',
                nameEn: 'Azure Fundamentals (AZ-900)',
                description: 'أساسيات منصة Microsoft Azure السحابية',
                provider: 'Microsoft',
                level: 'beginner'
            },
            {
                id: 'terraform',
                nameAr: 'HashiCorp Terraform Associate',
                nameEn: 'HashiCorp Terraform Associate',
                description: 'أتمتة إدارة البنية التحتية كرمز',
                provider: 'HashiCorp',
                level: 'intermediate'
            }
        ]
    },
    cybersecurity: {
        id: 'cybersecurity',
        titleKey: 'cybersecurity',
        descriptionKey: 'cybersecurityDesc',
        icon: '🛡️',
        color: 'bg-red-500',
        certifications: [
            {
                id: 'isc2-cc',
                nameAr: 'ISC2 Certified in Cybersecurity (CC)',
                nameEn: 'ISC2 Certified in Cybersecurity (CC)',
                description: 'شهادة أساسية في الأمن السيبراني من ISC2',
                provider: 'ISC2',
                level: 'beginner'
            },
            {
                id: 'security-plus',
                nameAr: 'CompTIA Security+',
                nameEn: 'CompTIA Security+',
                description: 'شهادة معتمدة دولياً في أساسيات الأمن السيبراني',
                provider: 'CompTIA',
                level: 'intermediate'
            },
            {
                id: 'google-cyber',
                nameAr: 'Google Cybersecurity Certificate',
                nameEn: 'Google Cybersecurity Certificate',
                description: 'برنامج شامل من جوجل في الأمن السيبراني',
                provider: 'Google',
                level: 'beginner'
            },
            {
                id: 'ejpt',
                nameAr: 'eJPT v2 – INE',
                nameEn: 'eJPT v2 – INE',
                description: 'اختبار اختراق عملي للمبتدئين',
                provider: 'INE',
                level: 'beginner'
            },
            {
                id: 'oscp',
                nameAr: 'OSCP – Offensive Security',
                nameEn: 'OSCP – Offensive Security',
                description: 'الشهادة الذهبية في اختبار الاختراق الأخلاقي',
                provider: 'Offensive Security',
                level: 'advanced'
            }
        ]
    },
    itSupport: {
        id: 'support',
        titleKey: 'itSupport',
        descriptionKey: 'itSupportDesc',
        icon: '🎧',
        color: 'bg-green-500',
        certifications: [
            {
                id: 'comptia-a-plus',
                nameAr: 'CompTIA A+',
                nameEn: 'CompTIA A+',
                description: 'الشهادة الأساسية في دعم الحاسوب وإصلاح الأعطال',
                provider: 'CompTIA',
                level: 'beginner'
            },
            {
                id: 'itil-foundation',
                nameAr: 'ITIL 4 Foundation',
                nameEn: 'ITIL 4 Foundation',
                description: 'إطار عمل لإدارة خدمات تقنية المعلومات',
                provider: 'ITIL',
                level: 'beginner'
            },
            {
                id: 'google-it-support',
                nameAr: 'Google IT Support',
                nameEn: 'Google IT Support',
                description: 'برنامج شامل من جوجل يغطي أساسيات الدعم الفني',
                provider: 'Google',
                level: 'beginner'
            },
            {
                id: 'ms365-fundamentals',
                nameAr: 'Microsoft 365 Fundamentals (MS-900)',
                nameEn: 'Microsoft 365 Fundamentals (MS-900)',
                description: 'أساسيات منصة Microsoft 365',
                provider: 'Microsoft',
                level: 'beginner'
            },
            {
                id: 'apple-acsp',
                nameAr: 'Apple ACSP',
                nameEn: 'Apple ACSP',
                description: 'دعم وإدارة أنظمة Apple',
                provider: 'Apple',
                level: 'intermediate'
            }
        ]
    },
    engineering: {
        id: 'engineering',
        titleKey: 'engineering',
        descriptionKey: 'engineeringDesc',
        icon: '⚙️',
        color: 'bg-purple-500',
        certifications: [
            {
                id: 'autocad-professional',
                nameAr: 'Autodesk Certified Professional – AutoCAD',
                nameEn: 'Autodesk Certified Professional – AutoCAD',
                description: 'الشهادة المهنية في برنامج أوتوكاد للرسم الهندسي',
                provider: 'Autodesk',
                level: 'intermediate'
            },
            {
                id: 'revit-professional',
                nameAr: 'Revit Certified Professional',
                nameEn: 'Revit Certified Professional',
                description: 'شهادة في برنامج Revit للنمذجة المعمارية',
                provider: 'Autodesk',
                level: 'intermediate'
            },
            {
                id: 'solidworks-cswa',
                nameAr: 'SolidWorks CSWA/CSWP',
                nameEn: 'SolidWorks CSWA/CSWP',
                description: 'شهادات في التصميم ثلاثي الأبعاد والنمذجة الهندسية',
                provider: 'SolidWorks',
                level: 'intermediate'
            },
            {
                id: 'siemens-automation',
                nameAr: 'Siemens Certified Automation Technician',
                nameEn: 'Siemens Certified Automation Technician',
                description: 'تقني أتمتة معتمد من سيمنز',
                provider: 'Siemens',
                level: 'intermediate'
            },
            {
                id: 'labview-clad',
                nameAr: 'CLAD – LabVIEW',
                nameEn: 'CLAD – LabVIEW',
                description: 'برمجة أنظمة القياس والتحكم الآلي',
                provider: 'National Instruments',
                level: 'intermediate'
            }
        ]
    },
    dataAnalytics: {
        id: 'data',
        titleKey: 'dataAnalytics',
        descriptionKey: 'dataAnalyticsDesc',
        icon: '📊',
        color: 'bg-orange-500',
        certifications: [
            {
                id: 'power-bi-analyst',
                nameAr: 'PL-300 Power BI Data Analyst',
                nameEn: 'PL-300 Power BI Data Analyst',
                description: 'تحليل البيانات وإنشاء التقارير باستخدام Power BI',
                provider: 'Microsoft',
                level: 'intermediate'
            },
            {
                id: 'google-data-analytics',
                nameAr: 'Google Data Analytics',
                nameEn: 'Google Data Analytics',
                description: 'برنامج شامل من جوجل في تحليل البيانات',
                provider: 'Google',
                level: 'beginner'
            },
            {
                id: 'ibm-data-science',
                nameAr: 'IBM Data Science',
                nameEn: 'IBM Data Science',
                description: 'برنامج علوم البيانات من IBM',
                provider: 'IBM',
                level: 'intermediate'
            },
            {
                id: 'meta-frontend',
                nameAr: 'Meta Front-End Developer',
                nameEn: 'Meta Front-End Developer',
                description: 'تطوير واجهات المستخدم الأمامية',
                provider: 'Meta',
                level: 'intermediate'
            },
            {
                id: 'aws-developer',
                nameAr: 'AWS Developer – Associate',
                nameEn: 'AWS Developer – Associate',
                description: 'تطوير ونشر التطبيقات على منصة AWS',
                provider: 'AWS',
                level: 'intermediate'
            },
            {
                id: 'oracle-java',
                nameAr: 'Oracle Java Associate (OCA)',
                nameEn: 'Oracle Java Associate (OCA)',
                description: 'أساسيات برمجة Java',
                provider: 'Oracle',
                level: 'intermediate'
            }
        ]
    },
    projectManagement: {
        id: 'project',
        titleKey: 'projectManagement',
        descriptionKey: 'projectManagementDesc',
        icon: '📋',
        color: 'bg-teal-500',
        certifications: [
            {
                id: 'capm',
                nameAr: 'CAPM (PMI)',
                nameEn: 'CAPM (PMI)',
                description: 'شهادة مساعد إدارة المشاريع من PMI',
                provider: 'PMI',
                level: 'beginner'
            },
            {
                id: 'prince2-foundation',
                nameAr: 'Prince2 Foundation',
                nameEn: 'Prince2 Foundation',
                description: 'أساسيات منهجية Prince2 لإدارة المشاريع',
                provider: 'AXELOS',
                level: 'beginner'
            },
            {
                id: 'scrum-master',
                nameAr: 'Scrum Master Certified (SMC)',
                nameEn: 'Scrum Master Certified (SMC)',
                description: 'إدارة المشاريع بمنهجية Scrum',
                provider: 'Scrum Study',
                level: 'intermediate'
            },
            {
                id: 'google-project-management',
                nameAr: 'Google Project Management',
                nameEn: 'Google Project Management',
                description: 'برنامج إدارة المشاريع من جوجل',
                provider: 'Google',
                level: 'beginner'
            },
            {
                id: 'agile-pm',
                nameAr: 'AgilePM Foundation',
                nameEn: 'AgilePM Foundation',
                description: 'أساسيات إدارة المشاريع الرشيقة',
                provider: 'APMG',
                level: 'beginner'
            }
        ]
    }
};

// Application State
let currentLanguage = 'ar';
let currentTheme = 'light';

// Initialize Application
document.addEventListener('DOMContentLoaded', function() {
    initializeApp();
    setupEventListeners();
    animateOnScroll();
});

function initializeApp() {
    // Load saved preferences
    loadPreferences();
    
    // Set initial language and theme
    updateLanguage();
    updateTheme();
    
    // Initialize track cards
    initializeTrackCards();
    
    // Animate stats on scroll
    observeStats();
}

function loadPreferences() {
    // Load language preference
    const savedLanguage = localStorage.getItem('preferred-language');
    if (savedLanguage && translations[savedLanguage]) {
        currentLanguage = savedLanguage;
    }
    
    // Load theme preference
    const savedTheme = localStorage.getItem('preferred-theme');
    if (savedTheme && ['light', 'dark'].includes(savedTheme)) {
        currentTheme = savedTheme;
    }
}

function setupEventListeners() {
    // Language toggle
    const langToggle = document.getElementById('langToggle');
    langToggle.addEventListener('click', toggleLanguage);
    
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', toggleTheme);
    
    // Contact form
    const contactForm = document.getElementById('contactForm');
    contactForm.addEventListener('submit', handleContactForm);
    
    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            scrollToSection(targetId);
        });
    });
}

function toggleLanguage() {
    currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
    localStorage.setItem('preferred-language', currentLanguage);
    updateLanguage();
    // Regenerate track cards with new language
    initializeTrackCards();
}

function updateLanguage() {
    const html = document.documentElement;
    const langToggle = document.getElementById('langToggle');
    
    if (currentLanguage === 'ar') {
        html.setAttribute('lang', 'ar');
        html.setAttribute('dir', 'rtl');
        langToggle.classList.add('active-ar');
        langToggle.classList.remove('active-en');
    } else {
        html.setAttribute('lang', 'en');
        html.setAttribute('dir', 'ltr');
        langToggle.classList.add('active-en');
        langToggle.classList.remove('active-ar');
    }
    
    // Update all text elements
    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (translations[currentLanguage][key]) {
            element.textContent = translations[currentLanguage][key];
        }
    });
}

function toggleTheme() {
    currentTheme = currentTheme === 'light' ? 'dark' : 'light';
    localStorage.setItem('preferred-theme', currentTheme);
    updateTheme();
}

function updateTheme() {
    document.body.setAttribute('data-theme', currentTheme);
}

function initializeTrackCards() {
    const tracksContainer = document.getElementById('tracksContainer');
    if (!tracksContainer) return;
    
    tracksContainer.innerHTML = '';
    
    Object.values(certificationTracks).forEach((track, index) => {
        const trackCard = createTrackCard(track);
        trackCard.style.animationDelay = `${index * 0.1}s`;
        tracksContainer.appendChild(trackCard);
    });
}

function createTrackCard(track) {
    const trackCard = document.createElement('div');
    trackCard.className = 'track-card';
    trackCard.setAttribute('data-track', track.id);
    
    const trackTitle = translations[currentLanguage][track.titleKey] || track.titleKey;
    const trackDescription = translations[currentLanguage][track.descriptionKey] || track.descriptionKey;
    
    trackCard.innerHTML = `
        <div class="track-header">
            <div class="track-icon ${track.id}">
                ${track.icon}
            </div>
            <div class="track-info">
                <h3>${trackTitle}</h3>
                <p>${trackDescription}</p>
            </div>
            <button class="expand-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6,9 12,15 18,9"></polyline>
                </svg>
            </button>
        </div>
        <div class="track-content">
            <div class="track-preview">
                <h4>${translations[currentLanguage].suitableFor} ${translations[currentLanguage].freshGraduates}:</h4>
                <ul>
                    ${track.certifications.slice(0, 3).map(cert => `
                        <li>
                            <span class="cert-bullet">•</span>
                            ${currentLanguage === 'ar' ? cert.nameAr : cert.nameEn}
                        </li>
                    `).join('')}
                </ul>
            </div>
            <div class="certifications">
                <h4>جميع الشهادات في هذا المسار:</h4>
                ${track.certifications.map(cert => `
                    <div class="cert-item">
                        <h5>${currentLanguage === 'ar' ? cert.nameAr : cert.nameEn}</h5>
                        <p class="cert-description">${cert.description}</p>
                        <div class="cert-meta">
                            <span class="provider">${translations[currentLanguage].provider}: ${cert.provider}</span>
                            <span class="level ${cert.level}">${translations[currentLanguage].level}: ${translations[currentLanguage][cert.level]}</span>
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
    
    // Add click event listener to header
    const header = trackCard.querySelector('.track-header');
    header.addEventListener('click', () => toggleTrackCard(trackCard));
    
    return trackCard;
}

function toggleTrackCard(card) {
    const isExpanded = card.classList.contains('expanded');
    
    if (isExpanded) {
        card.classList.remove('expanded');
    } else {
        // Close other expanded cards
        document.querySelectorAll('.track-card.expanded').forEach(otherCard => {
            if (otherCard !== card) {
                otherCard.classList.remove('expanded');
            }
        });
        
        // Expand current card
        card.classList.add('expanded');
    }
}

function scrollToSection(targetId) {
    const targetElement = document.getElementById(targetId);
    if (targetElement) {
        const offsetTop = targetElement.offsetTop - 80; // Account for fixed navbar
        window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
        });
    }
}

function handleContactForm(e) {
    e.preventDefault();
    
    const formData = new FormData(e.target);
    const name = formData.get('name');
    const email = formData.get('email');
    const message = formData.get('message');
    
    // Basic validation
    if (!name || !email || !message) {
        alert(currentLanguage === 'ar' ? 'يرجى ملء جميع الحقول' : 'Please fill in all fields');
        return;
    }
    
    // Email validation
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
        alert(currentLanguage === 'ar' ? 'يرجى إدخال بريد إلكتروني صحيح' : 'Please enter a valid email address');
        return;
    }
    
    // Show loading state
    const submitButton = e.target.querySelector('.submit-button');
    const originalText = submitButton.textContent;
    submitButton.textContent = currentLanguage === 'ar' ? 'جارٍ الإرسال...' : 'Sending...';
    submitButton.disabled = true;
    
    // Simulate form submission (since this is frontend-only)
    setTimeout(() => {
        alert(currentLanguage === 'ar' ? 'تم إرسال رسالتك بنجاح!' : 'Your message has been sent successfully!');
        
        // Reset form
        e.target.reset();
        submitButton.textContent = originalText;
        submitButton.disabled = false;
    }, 1500);
}

function observeStats() {
    const statsSection = document.querySelector('.stats');
    const statNumbers = document.querySelectorAll('.stat-number');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateStatNumbers();
                observer.unobserve(entry.target);
            }
        });
    }, {
        threshold: 0.5
    });
    
    observer.observe(statsSection);
}

function animateStatNumbers() {
    const statNumbers = document.querySelectorAll('.stat-number');
    
    statNumbers.forEach((statNumber, index) => {
        const finalNumber = statNumber.textContent;
        const isPlus = finalNumber.includes('+');
        const isK = finalNumber.includes('K');
        const numericValue = parseInt(finalNumber.replace(/[^\d]/g, ''));
        
        let currentValue = 0;
        const increment = Math.ceil(numericValue / 30);
        
        const timer = setInterval(() => {
            currentValue += increment;
            
            if (currentValue >= numericValue) {
                currentValue = numericValue;
                clearInterval(timer);
            }
            
            let displayValue = currentValue.toString();
            if (isK) displayValue += 'K';
            if (isPlus) displayValue += '+';
            
            statNumber.textContent = displayValue;
        }, 50);
    });
}

function animateOnScroll() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe track cards
    document.querySelectorAll('.track-card').forEach(card => {
        observer.observe(card);
    });
}

// CV Download function
function downloadCV() {
    const link = document.createElement('a');
    link.href = '/ITPathArabic/ITPathArabic/attached_assets/Abdulrahman Shahar CV _1751487175796.pdf';
    link.download = 'Abdulrahman_Shahar_CV.pdf';
    link.target = '_blank';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

// Utility Functions
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Keyboard Navigation Support
document.addEventListener('keydown', function(e) {
    // ESC key to close expanded cards
    if (e.key === 'Escape') {
        document.querySelectorAll('.track-card.expanded').forEach(card => {
            card.classList.remove('expanded');
        });
    }
});

// Error handling for failed operations
window.addEventListener('error', function(e) {
    console.error('Application error:', e.error);
});

// Export functions for testing or external use
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        translations,
        scrollToSection,
        toggleLanguage,
        toggleTheme,
        toggleTrackCard,
        downloadCV
    };
}